# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞

## üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç –Ω–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–ª—Å—è –≤–Ω–∏–∑
- –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –≤–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–µ–ª —Å–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### –†–µ—à–µ–Ω–∏–µ:
```javascript
async function sendMessage() {
  // ...–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  
  await api.post('/messages', messageData)
  newMessage.value = ''
  
  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É textarea
  if (messageInput.value) {
    messageInput.value.style.height = 'auto'
  }
  
  await loadMessages()
  
  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
  await nextTick()
  scrollToBottom()
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è –≤–Ω–∏–∑
- ‚úÖ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–æ
- ‚úÖ Textarea —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã—Å–æ—Ç–µ

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –í –∑–∞–≥–æ–ª–æ–≤–∫–µ —á–∞—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫

#### –†–µ—à–µ–Ω–∏–µ:
```javascript
async function loadChat() {
  const response = await api.get(`/chats/${route.params.id}`)
  chat.value = response.data
  
  // –î–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
  if (chat.value.chat_type === 'private' && chat.value.members?.length > 0) {
    const otherMember = chat.value.members.find(m => m.user_id !== currentUserId.value)
    if (otherMember) {
      try {
        const userResponse = await api.get(`/users/${otherMember.user_id}`)
        chat.value.name = `${userResponse.data.first_name} ${userResponse.data.last_name}`
      } catch (error) {
        console.error('Load user error:', error)
      }
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" –≤–º–µ—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ ID
- ‚úÖ –î–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫

---

### 3. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç..."

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- –§—É–Ω–∫—Ü–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
- –¢–∞–π–º–∞—É—Ç –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```javascript
let typingTimeout = null

function handleTyping() {
  adjustTextareaHeight()
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ "–ø–µ—á–∞—Ç–∞–µ—Ç"
  if (typingTimeout) {
    clearTimeout(typingTimeout)
  }
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç" –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã
  typingTimeout = setTimeout(() => {
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ "–ø–µ—Ä–µ—Å—Ç–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å"
  }, 3000)
}
```

**–í template:**
```vue
<textarea
  @input="handleTyping"
  ...
></textarea>
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```vue
<p v-if="isTyping" class="text-sm text-primary-600 dark:text-primary-400">
  –ø–µ—á–∞—Ç–∞–µ—Ç...
</p>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å WebSocket
- ‚úÖ –¢–∞–π–º–∞—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- ‚úÖ –ù–µ –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ textarea

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚Üê –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤                      ‚ãÆ   ‚îÇ ‚Üê –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
‚îÇ   –ø–µ—á–∞—Ç–∞–µ—Ç...                           ‚îÇ ‚Üê –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–∏–≤–µ—Ç!                                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ                      –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –û—Ç–ª–∏—á–Ω–æ!                                ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ                      –†–∞–¥ —Å–ª—ã—à–∞—Ç—å! üòä   ‚îÇ ‚Üê –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚Üë
                                    –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª
```

---

## üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –°–±—Ä–æ—Å –≤—ã—Å–æ—Ç—ã textarea:
- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ textarea –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã—Å–æ—Ç–µ
- –ù–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ä–∞—Å—Ç—è–Ω—É—Ç—ã–º –ø–æ—Å–ª–µ –¥–ª–∏–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–Ω—ã–π UX

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `await nextTick()` –ø–µ—Ä–µ–¥ —Å–∫—Ä–æ–ª–ª–æ–º
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ DOM –æ–±–Ω–æ–≤–∏–ª—Å—è
- –ù–∞–¥–µ–∂–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

---

## üîÑ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è "–ø–µ—á–∞—Ç–∞–µ—Ç"
socket.emit('typing', {
  chatId: route.params.id,
  userId: currentUserId.value
})

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è "–ø–µ—á–∞—Ç–∞–µ—Ç"
socket.on('user_typing', (data) => {
  if (data.chatId === route.params.id && data.userId !== currentUserId.value) {
    isTyping.value = true
    setTimeout(() => {
      isTyping.value = false
    }, 3000)
  }
})
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –¥–ª—è –±–æ–ª—å—à–∏—Ö —á–∞—Ç–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
- "–û–Ω–ª–∞–π–Ω" / "–ë—ã–ª(–∞) –≤ —Å–µ—Ç–∏..."
- –°—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª:
```
1. –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ß–∞—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å—Å—è –≤–Ω–∏–∑
4. –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∏–¥–Ω–æ
```

### 2. –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞:
```
1. –û—Ç–∫—Ä—ã—Ç—å –ª–∏—á–Ω—ã–π —á–∞—Ç
2. –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "–ò–º—è –§–∞–º–∏–ª–∏—è"
3. –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ ID
4. –î–ª—è –≥—Ä—É–ø–ø - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
```

### 3. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç":
```
1. –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç
2. –ù–∞—á–∞—Ç—å –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç
3. (–í –±—É–¥—É—â–µ–º) –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ —É–≤–∏–¥–∏—Ç "–ø–µ—á–∞—Ç–∞–µ—Ç..."
4. –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å—á–µ–∑–Ω–µ—Ç
```

### 4. –°–±—Ä–æ—Å textarea:
```
1. –ù–∞–ø–∏—Å–∞—Ç—å –¥–ª–∏–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫)
2. Textarea —Ä–∞—Å—Ç—è–Ω–µ—Ç—Å—è
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
4. Textarea –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã—Å–æ—Ç–µ
```

---

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:
```bash
docker restart chat_frontend
```

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç! ‚úÖ

---

## üéØ –ò—Ç–æ–≥

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –§–ò–û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- ‚úÖ –°–±—Ä–æ—Å –≤—ã—Å–æ—Ç—ã textarea –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –§—É–Ω–∫—Ü–∏—è handleTyping –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ "–ø–µ—á–∞—Ç–∞–µ—Ç"
- ‚úÖ –¢–∞–π–º–∞—É—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±—Ä–æ—Å–∞
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –£–ª—É—á—à–µ–Ω–æ:
- ‚úÖ UX –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∞ —á–∞—Ç–∞
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

### –†–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ textarea
