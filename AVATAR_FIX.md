# üñºÔ∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∫–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ backend –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å frontend:

```python
allow_origins=[
    "http://localhost:3000",
    "http://127.0.0.1:3000",
    "http://localhost:8000",
    "http://127.0.0.1:8000",
    "*"
]
```

### 2. –ü–∞–ø–∫–∞ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–∫
–°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `media/avatars` –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### 3. Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

## üöÄ –ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É:

### –®–∞–≥ 1: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å
```
–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üë§ –≤ sidebar
```

### –®–∞–≥ 2: –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä
```
–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∫—Ä—É–≥–ª—ã–π –∞–≤–∞—Ç–∞—Ä
–ü–æ—è–≤–∏—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –∫–∞–º–µ—Ä—ã üì∑
–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä
```

### –®–∞–≥ 3: –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```
–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB
–§–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP
```

### –®–∞–≥ 4: –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏
```
–ü–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!"
–ê–≤–∞—Ç–∞—Ä –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### Endpoint:
```
POST /api/users/me/avatar
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
```
file: File (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
```

### –û—Ç–≤–µ—Ç:
```json
{
  "id": 1,
  "username": "user",
  "first_name": "–ò–º—è",
  "last_name": "–§–∞–º–∏–ª–∏—è",
  "avatar": "/media/avatars/avatar_1_uuid.jpg",
  ...
}
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB
- –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (image/*)
- –°—Ç–∞—Ä—ã–π –∞–≤–∞—Ç–∞—Ä —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üêõ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend:
```bash
docker-compose logs backend
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É:
```bash
docker exec chat_backend ls -la media/avatars
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS:
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CORS

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```bash
docker-compose restart backend frontend
```

### 5. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:
```
F12 ‚Üí –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –∂–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞"
```

## üìä –ì–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä:

### –°–µ–π—á–∞—Å:
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å (–±–æ–ª—å—à–æ–π –∫—Ä—É–≥–ª—ã–π)

### –í –±—É–¥—É—â–µ–º:
- Sidebar (–≤–Ω–∏–∑—É, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å)
- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- –°–æ–æ–±—â–µ–Ω–∏—è
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## üé® –°—Ç–∏–ª–∏ –∞–≤–∞—Ç–∞—Ä–∞:

### –í –ø—Ä–æ—Ñ–∏–ª–µ:
```css
width: 120px
height: 120px
border-radius: 50%
background: gradient (–µ—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ç–æ)
cursor: pointer
hover: overlay —Å –∫–∞–º–µ—Ä–æ–π
```

### Overlay –ø—Ä–∏ hover:
```css
background: rgba(0, 0, 0, 0.6)
icon: üì∑
text: "–ò–∑–º–µ–Ω–∏—Ç—å"
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:

- [ ] Backend –∑–∞–ø—É—â–µ–Ω
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω
- [ ] –ü–∞–ø–∫–∞ media/avatars —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- [ ] –ê–≤–∞—Ç–∞—Ä –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π
- [ ] –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–≤–∞—Ç–∞—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä:
```
–ü—Ä–æ—Ñ–∏–ª—å ‚Üí –ö–ª–∏–∫ –Ω–∞ –∞–≤–∞—Ç–∞—Ä ‚Üí –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL:
```
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network ‚Üí avatar
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç—É—Å 200
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª:
```bash
docker exec chat_backend ls -la media/avatars
# –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª avatar_1_*.jpg
```

### 4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```
Ctrl+F5
–ê–≤–∞—Ç–∞—Ä –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è
```

## üí° –°–æ–≤–µ—Ç—ã:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Ñ–æ—Ç–æ** - –æ–Ω–∏ –ª—É—á—à–µ —Å–º–æ—Ç—Ä—è—Ç—Å—è –≤ –∫—Ä—É–≥–µ
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä** - –Ω–µ –±–æ–ª—å—à–µ 1MB –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ** - —Ñ–æ—Ç–æ –±—É–¥–µ—Ç —á–µ—Ç—á–µ
4. **–¶–µ–Ω—Ç—Ä–∏—Ä—É–π—Ç–µ –ª–∏—Ü–æ** - –æ–Ω–æ –±—É–¥–µ—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ –∫—Ä—É–≥–∞

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–µ —Ñ–æ—Ç–æ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! ‚ú®
