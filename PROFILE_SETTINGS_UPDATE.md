# ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å—Ç–∞—Ç—É—Å–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å

## üéØ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏":
- üü¢ **–û–Ω–ª–∞–π–Ω** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω
- üü° **–û—Ç–æ—à–µ–ª** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ö™ **–û—Ñ—Ñ–ª–∞–π–Ω** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ —Å–µ—Ç–∏

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤–∏–¥–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–∞—Ç—É—Å–∞

---

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### Frontend (`frontend/src/views/ProfileView.vue`)

#### –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫:
```vue
<div class="card dark:bg-gray-800 dark:border-gray-700 p-6">
  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">
    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  </h3>
  <div class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
        –°—Ç–∞—Ç—É—Å
      </label>
      <select
        v-model="profileData.status"
        @change="handleUpdateStatus"
        class="input bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
      >
        <option value="online">üü¢ –û–Ω–ª–∞–π–Ω</option>
        <option value="away">üü° –û—Ç–æ—à–µ–ª</option>
        <option value="offline">‚ö™ –û—Ñ—Ñ–ª–∞–π–Ω</option>
      </select>
      <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
        –í–∞—à —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
      </p>
    </div>
  </div>
</div>
```

#### –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:
```javascript
async function handleUpdateStatus() {
  try {
    await api.put('/users/me', { status: profileData.value.status })
    await authStore.checkAuth()
  } catch (error) {
    console.error('Update status error:', error)
    alert('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞')
  }
}
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞:
```javascript
profileData.value = {
  first_name: user.value.first_name || '',
  last_name: user.value.last_name || '',
  email: user.value.email || '',
  position: user.value.position || '',
  phone: phone,
  status: user.value.status || 'online'  // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω–æ
}
```

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞:
–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–ª—è `status` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –†–µ—à–µ–Ω–∏–µ:
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `ensure_user_status_field`
3. ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø–æ–ª–µ `status`
4. ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `offline`

### –ú–∏–≥—Ä–∞—Ü–∏—è:
```bash
docker exec chat_backend alembic revision --autogenerate -m "ensure_user_status_field"
docker exec chat_backend alembic upgrade head
```

---

## üé® –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

### 1. –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (`/employees`)
```vue
<!-- –ú–∞–ª–µ–Ω—å–∫–∞—è —Ç–æ—á–∫–∞ —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º -->
<div :class="[
  'w-2 h-2 rounded-full',
  employee.status === 'online' ? 'bg-green-500' : 
  employee.status === 'away' ? 'bg-yellow-500' : 
  'bg-gray-400'
]" :title="getStatusLabel(employee.status)"></div>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ üü¢
@ivan ‚Ä¢ –ú–µ–Ω–µ–¥–∂–µ—Ä
```

---

### 2. –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/users`)
```vue
<!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∞–≤–∞—Ç–∞—Ä–µ -->
<div :class="[
  'absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white',
  user.status === 'online' ? 'bg-green-500' : 
  user.status === 'away' ? 'bg-yellow-500' : 
  'bg-gray-400'
]"></div>

<!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–µ–π–¥–∂ -->
<span :class="[
  'text-xs px-2 py-0.5 rounded-full',
  user.status === 'online' ? 'bg-green-100 text-green-800' : 
  user.status === 'away' ? 'bg-yellow-100 text-yellow-800' : 
  'bg-gray-100 text-gray-800'
]">
  {{ getStatusLabel(user.status) }}
</span>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üë§üü¢ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ [–û–Ω–ª–∞–π–Ω]       ‚îÇ
‚îÇ     ivan@example.com            ‚îÇ
‚îÇ     –ú–µ–Ω–µ–¥–∂–µ—Ä                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 3. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/profile`)
```vue
<select v-model="profileData.status" @change="handleUpdateStatus">
  <option value="online">üü¢ –û–Ω–ª–∞–π–Ω</option>
  <option value="away">üü° –û—Ç–æ—à–µ–ª</option>
  <option value="offline">‚ö™ –û—Ñ—Ñ–ª–∞–π–Ω</option>
</select>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ù–∞—Å—Ç—Ä–æ–π–∫–∏                       ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ –°—Ç–∞—Ç—É—Å                          ‚îÇ
‚îÇ [üü¢ –û–Ω–ª–∞–π–Ω ‚ñº]                   ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ –í–∞—à —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º         ‚îÇ
‚îÇ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

| –°—Ç–∞—Ç—É—Å | Emoji | –¶–≤–µ—Ç —Ç–æ—á–∫–∏ | –¶–≤–µ—Ç –±–µ–π–¥–∂–∞ | –¢–µ–∫—Å—Ç |
|--------|-------|------------|-------------|-------|
| online | üü¢ | `bg-green-500` | `bg-green-100 text-green-800` | –û–Ω–ª–∞–π–Ω |
| away | üü° | `bg-yellow-500` | `bg-yellow-100 text-yellow-800` | –û—Ç–æ—à–µ–ª |
| offline | ‚ö™ | `bg-gray-400` | `bg-gray-100 text-gray-800` | –û—Ñ—Ñ–ª–∞–π–Ω |

### Dark Mode:
| –°—Ç–∞—Ç—É—Å | –¶–≤–µ—Ç –±–µ–π–¥–∂–∞ (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞) |
|--------|---------------------------|
| online | `bg-green-900 text-green-200` |
| away | `bg-yellow-900 text-yellow-200` |
| offline | `bg-gray-700 text-gray-200` |

---

## üîÑ API

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:
```http
PUT /users/me
Content-Type: application/json

{
  "status": "online"
}
```

### –û—Ç–≤–µ—Ç:
```json
{
  "id": 1,
  "username": "ivan",
  "first_name": "–ò–≤–∞–Ω",
  "last_name": "–ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com",
  "position": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
  "role": "employee",
  "status": "online",
  "avatar_url": "/uploads/avatars/1.jpg",
  "last_seen": "2025-11-22T12:00:00",
  "is_active": true,
  "created_at": "2025-01-01T00:00:00"
}
```

---

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å: `http://localhost:3000/profile`
2. –ù–∞–π—Ç–∏ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
3. –í—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
4. –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** (`/employees`) - —Ç–æ—á–∫–∞ —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (`/users`) - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∞–≤–∞—Ç–∞—Ä–µ + –±–µ–π–¥–∂
3. **–ß–∞—Ç—ã** - —Å—Ç–∞—Ç—É—Å –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:
```
1. –û—Ç–∫—Ä—ã—Ç—å /profile
2. –ù–∞–π—Ç–∏ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
3. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–û—Ç–æ—à–µ–ª"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è
```

### 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:
```
1. –û—Ç–∫—Ä—ã—Ç—å /employees
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–≤–µ—Ç —Ç–æ—á–∫–∏ —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º
3. –û—Ç–∫—Ä—ã—Ç—å /users
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∞–≤–∞—Ç–∞—Ä–µ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–µ–π–¥–∂
```

### 3. –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:
```
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–û–Ω–ª–∞–π–Ω" ‚Üí üü¢ –∑–µ–ª–µ–Ω—ã–π
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–û—Ç–æ—à–µ–ª" ‚Üí üü° –∂–µ–ª—Ç—ã–π
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–û—Ñ—Ñ–ª–∞–π–Ω" ‚Üí ‚ö™ —Å–µ—Ä—ã–π
```

---

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã:
```bash
docker restart chat_backend chat_frontend
```

–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞:
```bash
docker exec chat_backend alembic upgrade head
```

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç! ‚úÖ

---

## üéØ –ò—Ç–æ–≥

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –†–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- ‚úÖ –í—ã–±–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (–æ–Ω–ª–∞–π–Ω/–æ—Ç–æ—à–µ–ª/–æ—Ñ—Ñ–ª–∞–π–Ω)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –ø–æ–ª–µ `status`

### –†–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–∑–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/—Å–µ—Ä—ã–π)
