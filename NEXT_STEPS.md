# üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

## ‚úÖ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ Backend: http://localhost:8000
- ‚úÖ Frontend: http://localhost:3000
- ‚úÖ PostgreSQL: localhost:5432

–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## üß™ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000
3. –ù–∞–∂–º–∏—Ç–µ **F12** –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
4. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **admin / admin123**

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

```
üîå WebSocket connect() called
Current state: undefined
Is connecting: false
üîó Connecting to WebSocket: ws://localhost:8000/ws?token=...
Token (first 20 chars): eyJhbGciOiJIUzI1NiIs...
‚úÖ WebSocket onopen fired - connection established!
üì® WebSocket message received: connected {...}
```

### –®–∞–≥ 3: –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –õ–æ–≥–∏ –µ—Å—Ç—å ‚úÖ**
- WebSocket –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ!
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–º. –Ω–∏–∂–µ)

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –õ–æ–≥–æ–≤ –Ω–µ—Ç ‚ùå**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ backend: `docker logs chat_backend --tail 100`
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ï—Å—Ç—å –æ—à–∏–±–∫–∏ ‚ö†Ô∏è**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üß™ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ï—Å–ª–∏ WebSocket –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è (–í–∞—Ä–∏–∞–Ω—Ç –ê):

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- –û—Ç–∫—Ä–æ–π—Ç–µ **–≤—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ** –±—Ä–∞—É–∑–µ—Ä–∞ (–∏–ª–∏ –≤—Ç–æ—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä)
- –í –ø–µ—Ä–≤–æ–º –æ–∫–Ω–µ: –≤–æ–π–¥–∏—Ç–µ –∫–∞–∫ **user1 / password123**
- –í–æ –≤—Ç–æ—Ä–æ–º –æ–∫–Ω–µ: –≤–æ–π–¥–∏—Ç–µ –∫–∞–∫ **user2 / password123**
- –í –æ–±–æ–∏—Ö –æ–∫–Ω–∞—Ö –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í –ø–µ—Ä–≤–æ–º –æ–∫–Ω–µ (user1): –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ /chats
- –ù–∞–π–¥–∏—Ç–µ —á–∞—Ç —Å user2 (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
- –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: **"–¢–µ—Å—Ç WebSocket"**

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ç–æ—Ä–æ–º –æ–∫–Ω–µ (user2)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ /chats
- **–ù–ï –û–¢–ö–†–´–í–ê–ô–¢–ï** —á–∞—Ç —Å user1
- –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –∏ –∫–æ–Ω—Å–æ–ª—å

### 4. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ù–∞ —ç–∫—Ä–∞–Ω–µ:**
- ‚úÖ –ß–∞—Ç —Å user1 –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª—Å—è –Ω–∞–≤–µ—Ä—Ö
- ‚úÖ –ü–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–¢–µ—Å—Ç WebSocket"
- ‚úÖ –ü–æ—è–≤–∏–ª—Å—è –∫—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ —Å —Ü–∏—Ñ—Ä–æ–π "1"

**–í –∫–æ–Ω—Å–æ–ª–∏:**
```
üì® WebSocket message received: new_message {...}
üì® New message in chat list: {chat_id: X, message: {...}}
üìä Unread count for chat X: 1
‚¨ÜÔ∏è Moved chat X to top
```

### 5. –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ**
- –û—Ç–ª–∏—á–Ω–æ! WebSocket –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ ‚ùå**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –æ–±–æ–∏—Ö –æ–∫–æ–Ω
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ backend: `docker logs chat_backend -f` (–≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏)
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ö†Ô∏è**
- –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ —á—Ç–æ –Ω–µ—Ç
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üìã –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º WebSocket service
const ws = window.websocket || (await import('/src/services/websocket.js')).default

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
console.log('WebSocket connected:', ws.isConnected())
console.log('WebSocket state:', ws.ws?.readyState)
// 0 = CONNECTING, 1 = OPEN, 2 = CLOSING, 3 = CLOSED

// –ï—Å–ª–∏ state = 1, WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:

1. **TESTING_WEBSOCKET.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
2. **WEBSOCKET_DEBUG.md** - –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å WebSocket
3. **CURRENT_STATUS.md** - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
4. **PROJECT_STARTED.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
docker-compose restart
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ backend
```bash
docker logs chat_backend -f
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ frontend
```bash
docker logs chat_frontend -f
```

## üéØ –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ WebSocket –∏ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.**

---

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°:

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. ‚úÖ –ù–∞–∂–º–∏—Ç–µ F12
3. ‚úÖ –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
5. ‚úÖ –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ñ–¥—É –≤–∞—à –æ—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏!** üöÄ

---

**–î–∞—Ç–∞:** 23.11.2025 12:20
