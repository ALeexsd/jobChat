{
    "kiroAgent.trustedCommands": [
        "docker-compose down",
        "type \"$env:USERPROFILE\\.kiro\\settings\\mcp.json\"",
        "docker --version",
        "docker-compose --version",
        "Copy-Item backend\\.env.example backend\\.env -Force",
        "docker-compose up",
        "Start-Sleep -Seconds 30",
        "Start-Sleep -Seconds 60",
        "Start-Sleep -Seconds 90",
        "docker ps -a",
        "docker-compose up -d --build",
        "docker images | Select-String \"ch2\"",
        "docker images",
        "docker-compose up -d",
        "Start-Sleep -Seconds 10",
        "docker-compose up -d postgres backend",
        "docker-compose ps",
        "docker-compose exec backend alembic upgrade head",
        "docker-compose restart backend",
        "docker-compose exec backend python scripts/create_admin.py",
        "docker-compose exec backend alembic revision --autogenerate -m \"Initial migration\"",
        "docker-compose exec backend mkdir -p /app/alembic/versions",
        "docker-compose build backend",
        "curl http://localhost:8000",
        "docker-compose logs backend --tail=50",
        "Start-Sleep -Seconds 5",
        "docker-compose logs backend --tail=30",
        "docker-compose logs frontend --tail=50",
        "docker-compose restart frontend",
        "docker-compose logs frontend --tail=30",
        "docker-compose logs frontend --tail=10",
        "docker-compose up -d backend",
        "docker-compose logs backend --tail=20",
        "curl http://localhost:8000 | ConvertFrom-Json",
        "docker-compose logs frontend --tail=5",
        "docker-compose logs backend --tail=10",
        "docker-compose up -d frontend",
        "docker-compose exec backend alembic revision --autogenerate -m \"fix_subtask_is_completed_type\"",
        "Start-Sleep -Seconds 3",
        "python -m uvicorn app.main:app --reload",
        "pip install -r requirements.txt",
        "pip install fastapi uvicorn[standard] sqlalchemy pydantic python-jose[cryptography] passlib[bcrypt] python-multipart websockets aiofiles pillow",
        "python -m uvicorn app.main:app --reload --port 8000",
        "pip install pydantic-settings email-validator",
        "pip install aiosqlite",
        "npm run dev",
        "npm install",
        "docker-compose down -v",
        "docker exec chat_backend alembic upgrade head",
        "curl http://localhost:8000/health",
        "timeout /t 3",
        "docker exec chat_frontend cat /app/src/App.vue | Select-String -Pattern \"primary-color\" -Context 2",
        "docker exec chat_frontend cat /app/src/main.js",
        "docker-compose down && docker-compose up -d --build",
        "docker-compose up -d --build --force-recreate",
        "timeout /t 5",
        "docker-compose restart backend frontend",
        "docker exec chat_backend mkdir -p media/avatars",
        "type \"C:\\Users\\–ê–ª–µ–∫—Å–∞–Ω–¥—Ä\\.kiro\\settings\\mcp.json\"",
        "git status",
        "docker logs chat_backend --tail 50",
        "docker-compose exec frontend npm install",
        "docker-compose logs frontend --tail 50",
        "timeout /t 3 /nobreak >nul 2>&1 & echo \"Waited\"",
        "docker-compose logs -f frontend --tail 50",
        "docker-compose exec postgres psql -U postgres -d chat_db -c \"SELECT id, username, first_name, last_name, is_active FROM users LIMIT 5;\"",
        "docker-compose exec -e PGPASSWORD=postgres postgres psql -U postgres -d chat_db -c \"SELECT id, username, first_name, last_name, is_active FROM users LIMIT 5;\"",
        "docker-compose exec backend python -c \"import asyncio; from app.core.database import get_db; from app.models.user import User; from sqlalchemy import select; async def check(): async for db in get_db(): result = await db.execute(select(User).limit(5)); users = result.scalars().all(); print([u.username for u in users]); asyncio.run(check())\"",
        "python test_auth.py",
        "curl -X POST http://localhost:8000/api/auth/register -H \"Content-Type: application/json\" -d '{\\\"username\\\":\\\"testuser\\\",\\\"password\\\":\\\"test123\\\",\\\"first_name\\\":\\\"–¢–µ—Å—Ç\\\",\\\"last_name\\\":\\\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\\\"}'",
        "Invoke-WebRequest -Uri \"http://localhost:8000/api/auth/register\" -Method POST -Headers @{\"Content-Type\"=\"application/json\"} -Body '{\"username\":\"testuser\",\"password\":\"test123\",\"first_name\":\"–¢–µ—Å—Ç\",\"last_name\":\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\"}'",
        "docker-compose logs backend --tail 50 | Select-String -Pattern \"422\\|error\\|validation\"",
        "docker-compose restart",
        "docker-compose build frontend",
        "docker-compose logs backend --tail 20",
        "docker-compose logs backend --tail 30",
        "docker-compose exec backend alembic revision --autogenerate -m \"Add position and phone to users\"",
        "docker restart chat_frontend",
        "docker logs chat_frontend --tail 30",
        "timeout /t 5 /nobreak >nul & docker logs chat_frontend --tail 20",
        "docker logs chat_backend --tail 50 | Select-String -Pattern \"422\\|routes\\|error\" -Context 2",
        "docker logs chat_backend --tail 100",
        "Start-Sleep -Seconds 5; docker logs chat_frontend --tail 15",
        "Start-Sleep -Seconds 5; docker logs chat_frontend --tail 10",
        "docker ps",
        "docker logs chat_backend --tail 30",
        "docker restart chat_backend",
        "Start-Sleep -Seconds 5; docker logs chat_backend --tail 20",
        "Start-Sleep -Seconds 5; docker logs chat_backend --tail 15",
        "docker start chat_postgres chat_backend chat_frontend",
        "docker logs chat_backend --tail 10",
        "Test-Path frontend/src/views/admin/AdminDashboard.vue",
        "New-Item -ItemType Directory -Path frontend/src/views/admin -Force",
        "Get-ChildItem frontend/src/views/admin/",
        "curl -X GET \"http://localhost:8000/api/users/\" -H \"accept: application/json\" | ConvertFrom-Json | Where-Object { $_.username -eq \"aleexsd\" } | Select-Object id, username, first_name, last_name, role",
        "$response = Invoke-RestMethod -Uri \"http://localhost:8000/api/users/\" -Method Get; $response | Where-Object { $_.username -eq \"aleexsd\" } | Select-Object id, username, first_name, last_name, role",
        "docker exec chat_postgres psql -U postgres -d messenger -c \"SELECT id, username, first_name, last_name, role FROM users WHERE username = 'aleexsd';\"",
        "docker exec chat_postgres env | Select-String \"POSTGRES\"",
        "docker exec chat_postgres psql -U chatuser -d chatdb -c \"UPDATE users SET role = 'ADMIN' WHERE username = 'aleexsd';\"",
        "Start-Sleep -Seconds 5; docker ps",
        "docker exec chat_backend alembic revision --autogenerate -m \"ensure_user_status_field\"",
        "docker restart chat_backend chat_frontend",
        "wc -l frontend/src/views/ProfileView.vue",
        "docker logs chat_frontend --tail 50 2>&1 | Select-String \"missing end tag\" -Context 5",
        "timeout /t 5 /nobreak >$null; docker logs chat_frontend --tail 20",
        "alembic revision -m \"add_last_read_at_to_chat_members\"",
        "python -m alembic revision -m \"add_last_read_at_to_chat_members\"",
        "python -c \"from alembic.config import Config; from alembic import command; alembic_cfg = Config('alembic.ini'); command.upgrade(alembic_cfg, 'head')\"",
        "pip install alembic",
        "python -m alembic upgrade head",
        "pip install asyncpg",
        "python scripts/restore_users.py",
        "python scripts/restore_users_sync.py",
        "python scripts/quick_restore.py",
        ".\\restore_users.bat",
        "docker ps --filter \"name=chat_backend\"",
        "docker cp restore_users_simple.py chat_backend:/app/restore_users.py",
        "docker exec chat_backend python restore_users.py",
        "docker exec chat_backend pip install asyncpg",
        "docker exec chat_backend printenv DATABASE_URL",
        "docker cp restore_users_fixed.py chat_backend:/app/restore_users.py",
        "docker ps --filter \"name=chat_frontend\"",
        "docker cp backend/app/api/chats.py chat_backend:/app/app/api/chats.py",
        "timeout /t 5 /nobreak >nul & docker ps --filter \"name=chat_backend\"",
        "Start-Sleep -Seconds 5; docker ps --filter \"name=chat_backend\"",
        "docker logs chat_backend --tail 20",
        "curl -I http://localhost:8000/api/chats/ -H \"Origin: http://localhost:3000\"",
        "Invoke-WebRequest -Uri \"http://localhost:8000/api/chats/\" -Method OPTIONS -Headers @{\"Origin\"=\"http://localhost:3000\"}",
        "docker cp backend/app/main.py chat_backend:/app/app/main.py",
        "Start-Sleep -Seconds 3; docker logs chat_backend --tail 10",
        "docker exec chat_backend curl -s http://localhost:8000/health",
        "docker exec chat_backend python -c \"import requests; print(requests.get('http://localhost:8000/health').json())\"",
        "docker logs chat_backend --tail 100 | Select-String -Pattern \"CORS|OPTIONS|8000\"",
        "docker cp backend/app/models/chat.py chat_backend:/app/app/models/chat.py",
        "Invoke-WebRequest -Uri \"http://localhost:8000/health\" -UseBasicParsing",
        "docker exec chat_frontend npm run build",
        "timeout /t 5 /nobreak >nul & docker logs chat_backend --tail 30",
        "docker logs chat_frontend --tail 20",
        "docker exec chat_backend ps aux | findstr uvicorn",
        "curl http://localhost:8000/api/health",
        "curl http://localhost:8000/",
        "curl http://localhost:3000/",
        "if (Test-Path \"frontend/.env\") { Get-Content \"frontend/.env\" } else { echo \"File not found\" }",
        "docker restart chat_backend; docker restart chat_frontend",
        "Start-Sleep -Seconds 5; docker logs chat_backend --tail 50",
        "Start-Sleep -Seconds 5; docker-compose ps",
        "docker logs chat_backend --tail 100 | Select-String -Pattern \"WebSocket|new_message|User.*connected\"",
        "Start-Sleep -Seconds 8; docker logs chat_backend --tail 50",
        "docker logs chat_backend --tail 50 | Select-String -Pattern \"WebSocket|ws|JWT|Token\"",
        "docker logs chat_backend --tail 50 | Select-String -Pattern \"WebSocket|ws|connection attempt\"",
        "Start-Sleep -Seconds 5; docker logs chat_backend --tail 30",
        "docker exec chat_backend pip list | Select-String -Pattern \"websocket\"",
        "Start-Sleep -Seconds 5; docker logs chat_backend --tail 10",
        "docker logs chat_backend --tail 50 | Select-String -Pattern \"status|online|offline\"",
        "npm install vue-pdf-embed mammoth",
        "docker exec chat_frontend npm install vue-pdf-embed mammoth",
        "npm install @vue-pdf-viewer/viewer",
        "docker exec chat_frontend npm install @vue-pdf-viewer/viewer",
        "docker logs chat_frontend --tail 15",
        "npm install v-emoji-picker",
        "npm install vue3-emoji-picker",
        "docker exec chat_frontend npm install vue3-emoji-picker",
        "npm install vue-yandex-maps",
        "docker exec chat_frontend npm install vue-yandex-maps",
        "echo \"# Smart Routes Documentation\" > SMART_ROUTES_YANDEX.md",
        "docker-compose exec frontend npm uninstall vue3-emoji-picker",
        "docker-compose exec frontend npm install v-emoji-picker",
        "docker-compose exec frontend npm install emoji-picker-element",
        "docker-compose logs frontend --tail=20",
        "docker-compose exec frontend npm install vue-audio-recorder",
        "docker-compose exec backend alembic heads",
        "docker-compose exec frontend rm -rf node_modules/.vite",
        "docker-compose logs frontend --tail=15",
        "docker-compose exec frontend mkdir -p public/sounds",
        "dir TASK_NOTIFICATIONS*.md",
        "dir *NOTIFICATION*.md, *DEBUG*.md, QUICK_FIX*.md",
        ".\\restart_project.bat",
        "netstat -ano | findstr :3000",
        "netstat -ano | findstr :8000",
        "taskkill /F /PID 12796",
        "Start-Process cmd -ArgumentList \"/k cd backend && python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\"",
        "Start-Sleep -Seconds 3; curl http://localhost:8000/health",
        "python -m uvicorn app.main:app --host 0.0.0.0 --port 8000",
        "python -c \"import asyncpg; print(asyncpg.__version__)\"",
        "timeout /t 3 /nobreak >nul & docker-compose logs --tail=20 frontend",
        "docker-compose logs --tail=30 frontend",
        "docker-compose logs --tail=30 backend",
        "docker-compose logs --tail=50 backend",
        "docker-compose logs --tail=30 backend | Select-String -Pattern \"GET /api/routes\"",
        "docker-compose logs --tail=20 backend",
        "docker-compose logs --tail=100 backend | Select-String -Pattern \"Route|Assignee|User:\"",
        "docker-compose logs --tail=100 backend | Select-String -Pattern \"Route|Assignee|User|üó∫Ô∏è|üë§|‚úÖ|‚ùå\"",
        "docker-compose exec -T postgres psql -U chatuser -d chatdb -c \"UPDATE users SET last_name = '–¢–µ—Å—Ç–æ–≤', phone = '+79991234567' WHERE id = 4;\"",
        "docker-compose exec -T backend alembic revision --autogenerate -m \"Add contact fields to route locations\"",
        "docker-compose exec -T backend alembic upgrade head",
        "docker-compose exec -T postgres psql -U chatuser -d chatdb -c \"ALTER TABLE route_locations ADD COLUMN IF NOT EXISTS contact_name VARCHAR, ADD COLUMN IF NOT EXISTS contact_phone VARCHAR;\"",
        "npm run build",
        "npm install emoji-picker-element",
        "docker system prune -f",
        "type \"%USERPROFILE%\\.kiro\\settings\\mcp.json\"",
        "type $env:USERPROFILE\\.kiro\\settings\\mcp.json",
        "Get-Content deploy-ubuntu.sh | Select-Object -First 5",
        "Get-ChildItem -Filter \"*VPS*.md\" | Select-Object Name, Length | Format-Table -AutoSize",
        "Get-ChildItem -Filter \"*.sh\" | Select-Object Name, Length | Format-Table -AutoSize",
        "Write-Output \"=== –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è VPS ===\" ; Write-Output \"\" ; Write-Output \"–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:\" ; Get-ChildItem -Filter \"*VPS*.md\",\"START_HERE.md\",\"COMMANDS_REFERENCE.md\" | Select-Object Name, @{Name=\"Size(KB)\";Expression={[math]::Round($_.Length/1KB,1)}} | Format-Table -AutoSize ; Write-Output \"\" ; Write-Output \"–°–∫—Ä–∏–ø—Ç—ã:\" ; Get-ChildItem -Filter \"deploy-ubuntu.sh\",\"update-app.sh\",\"restore-backup.sh\",\"check-health.sh\",\"monitoring-setup.sh\" | Select-Object Name, @{Name=\"Size(KB)\";Expression={[math]::Round($_.Length/1KB,1)}} | Format-Table -AutoSize",
        "git add docker-compose.yml",
        "git commit -m \"Update docker-compose.yml: remove volumes for Timeweb hosting, optimize for 1GB RAM\"",
        "git push origin main",
        "git commit -m \"Update domain to aleexsd-jobchat-9053.twc1.net\"",
        "git add ."
    ]
}