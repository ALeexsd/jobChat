# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü—Ä–æ—Ñ–∏–ª—å –∏ –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ –ø–æ–ª—è–º

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è - –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∑–∞–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ —Å—Ä–∞–∑—É.

### –†–µ—à–µ–Ω–∏–µ

**–£–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:**
- –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–Ω–æ –ø–æ–ª–µ –∏–ª–∏ –≤—Å–µ —Å—Ä–∞–∑—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**frontend/src/views/ProfileView.vue:**
```javascript
async function handleUpdateProfile() {
  if (phoneError.value) {
    alert('–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ')
    return
  }
  
  try {
    // –°–æ–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
    const dataToSend = {}
    
    if (profileData.value.first_name !== user.value?.first_name) {
      dataToSend.first_name = profileData.value.first_name || null
    }
    
    if (profileData.value.last_name !== user.value?.last_name) {
      dataToSend.last_name = profileData.value.last_name || null
    }
    
    if (profileData.value.email !== user.value?.email) {
      dataToSend.email = profileData.value.email || null
    }
    
    if (profileData.value.position !== user.value?.position) {
      dataToSend.position = profileData.value.position || null
    }
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    const currentPhone = user.value?.phone?.startsWith('+7') 
      ? user.value.phone.substring(2) 
      : user.value?.phone || ''
    
    if (profileData.value.phone !== currentPhone) {
      dataToSend.phone = profileData.value.phone ? `+7${profileData.value.phone}` : null
    }
    
    // –ï—Å–ª–∏ –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
    if (Object.keys(dataToSend).length === 0) {
      alert('–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è')
      return
    }
    
    await api.put('/users/me', dataToSend)
    await authStore.checkAuth()
    alert('–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω')
  } catch (error) {
    console.error('Update profile error:', error)
    alert('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è: ' + (error.response?.data?.detail || error.message))
  }
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–º—è
- ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email
- ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω
- ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Å—Ä–∞–∑—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ 422 –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π.

### –†–µ—à–µ–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π:**
- `type` ‚Üí `chat_type`
- `members` ‚Üí `member_ids`

**frontend/src/components/CreateChatModal.vue:**
```javascript
async function handleSubmit() {
  loading.value = true
  
  try {
    const chatData = {
      name: formData.value.name,
      chat_type: formData.value.type,  // ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
      member_ids: formData.value.type === 'group'  // ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
        ? formData.value.members 
        : [formData.value.user]
    }
    
    await api.post('/chats', chatData)
    emit('created')
    emit('close')
  } catch (error) {
    console.error('Create chat error:', error)
    alert('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞: ' + (error.response?.data?.detail || error.message))
  } finally {
    loading.value = false
  }
}
```

### –°—Ö–µ–º–∞ backend:
```python
class ChatCreate(BaseModel):
    name: Optional[str] = None
    chat_type: ChatType  # ‚Üê –û–∂–∏–¥–∞–µ—Ç chat_type
    member_ids: List[int]  # ‚Üê –û–∂–∏–¥–∞–µ—Ç member_ids
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ –ø–æ–ª—è–º

**–¢–µ—Å—Ç 1: –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–º—è**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∏–º—è: "–ò–≤–∞–Ω"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ –∏–º—è

**–¢–µ—Å—Ç 2: –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ email: "new@example.com"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ email

**–¢–µ—Å—Ç 3: –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω: "912345678"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω

**–¢–µ—Å—Ç 4: –ò–∑–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
2. –ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è

**–¢–µ—Å—Ç 5: –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
2. –ù–µ –º–µ–Ω—è–π—Ç–µ –Ω–∏—á–µ–≥–æ
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞

**–¢–µ—Å—Ç 1: –õ–∏—á–Ω—ã–π —á–∞—Ç**
1. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —á–∞—Ç"
2. –ù–∞–∑–≤–∞–Ω–∏–µ: "–ß–∞—Ç —Å –ò–≤–∞–Ω–æ–º"
3. –¢–∏–ø: "–õ–∏—á–Ω—ã–π —á–∞—Ç"
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å"
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∞—Ç —Å–æ–∑–¥–∞–Ω –±–µ–∑ –æ—à–∏–±–∫–∏ 422

**–¢–µ—Å—Ç 2: –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç**
1. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —á–∞—Ç"
2. –ù–∞–∑–≤–∞–Ω–∏–µ: "–†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞"
3. –¢–∏–ø: "–ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç"
4. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å"
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∞—Ç —Å–æ–∑–¥–∞–Ω –±–µ–∑ –æ—à–∏–±–∫–∏ 422

---

## üìä –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ—Ñ–∏–ª—å:
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–µ–π
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞

### –ß–∞—Ç—ã:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞
- ‚úÖ –í—ã–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –£–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:

**1. –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:**
- –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

**2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ù–µ–ª—å–∑—è —Å–ª—É—á–∞–π–Ω–æ —Å—Ç–µ—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ
- –¢–æ–ª—å–∫–æ —è–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**3. –£–¥–æ–±—Å—Ç–≤–æ:**
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–Ω–æ –ø–æ–ª–µ
- –ù–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ

**4. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## üöÄ Frontend –æ–±–Ω–æ–≤–ª–µ–Ω

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã!

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–π—á–∞—Å:**
1. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∏–º—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
2. –°–æ–∑–¥–∞–π—Ç–µ –ª–∏—á–Ω—ã–π —á–∞—Ç
3. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç

–í—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! üéâ
